(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{206:function(e,t,r){"use strict";r.r(t);r(12),r(112),r(190),r(20);var s=r(27),o=r.n(s),a=(r(13),r(677)),n=r(111),i=r(0);const c=i.format.elemToFloat,u=i.DOM.extractElementFromHTML;class l extends a.a{constructor(){super(),this.BASE_URL="",this.EXISTING_CODE_SELECTOR="#promotion_code",this.TOTAL_SELECTOR=".row3 .my_shop_price",this.APPLY_PATHNAME="m-flow-a-cart.htm",this.REMOVE_PATHNAME="m-flow-a-clearCoupon.htm",this.parseTotalElementCallback=(e=>c(e))}getExistingCodes(){const e=[document.querySelector(this.EXISTING_CODE_SELECTOR).getAttribute("value")].filter(e=>Boolean(e));return{codes:e,codeCount:e.length}}removeCodes(){return this._removeCode().then(e=>this._parseTotal(e))}checkCodes(e,t=this._parseTotal()){return Object(i.log)(`Original price: ${t}`),o.a.each(e,e=>this._applyCode(e,!0).then(r=>{const s=this._parseTotal(r),o=t-s;return this._removeCode().then(()=>n.a.$emit("code-checked",{code:e,finalPrice:s,finalDiscount:o}))}))}applyCodes(e){return this._applyCode(e[0])}_applyCode(e){return this._manageCode(`${this.APPLY_PATHNAME}?pcode=${e}`)}_removeCode(){return this._manageCode(this.REMOVE_PATHNAME)}_manageCode(e){return fetch(`${this.BASE_URL}/${e}`,{method:"GET",credentials:"include"}).then(e=>e.text())}_parseTotal(e){let t=null;return t=e?u(e,this.TOTAL_SELECTOR):document.querySelector(this.TOTAL_SELECTOR),this.parseTotalElementCallback(t)}}var m=r(37);function h(e,t,r,s,o,a,n){try{var i=e[a](n),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(s,o)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(s,o){var a=e.apply(t,r);function n(e){h(a,s,o,n,i,"next",e)}function i(e){h(a,s,o,n,i,"throw",e)}n(void 0)})}}const p=i.format.elemToFloat,f=i.DOM.extractElement,C="https://cart.dresslily.com";var g={name:"dresslily",domain:"dresslily.com",Driver:class extends l{constructor(){super(),this.BASE_URL=C,this.DOMAIN="dresslily.com",this.EXISTING_CODE_SELECTOR="#cart_summary_promotion_code",this.TOTAL_SELECTOR=".cart-summary-info li:last-child .my-shop-price",this.EMPTY_CART_SELECTOR=".cart-empty-box",this.REMOVE_PATHNAME="fun/index.php?act=clearCoupon",this.TOTAL_REG=/o.cart.total = {"goods_price":(\d+\.\d+|\d+)/,this.DISABLE_TIME_MS=12e5,i.request.setType(i.requestTypes.embedded)}checkCondition(){var e=this;return d(regeneratorRuntime.mark(function t(){var r,s,o,a,n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=window.location.href,s=!0,t.next=4,m.a.getDriverStorage(e.DOMAIN);case 4:return(o=t.sent)&&(Date.now()-o.lastTestTimestamp>=e.DISABLE_TIME_MS?m.a.deleteDriverStorage(e.DOMAIN):s=o.codeTestingCount<2),a=r.startsWith(`${C}/shopping-cart`)||r.startsWith(`${C}/m-flow-a-cart.htm`),n=(document.querySelector(e.EMPTY_CART_SELECTOR)||{}).offsetParent,i=(document.querySelector(e.EXISTING_CODE_SELECTOR)||{}).offsetParent,t.abrupt("return",a&&!n&&i&&s);case 10:case"end":return t.stop()}},t)}))()}removeCodes(){return this._removeCode().then(()=>this._getUpdatedCart()).then(e=>this._parseTotal(e))}beforeApplyCodes(){var e=this;return d(regeneratorRuntime.mark(function t(){var r,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.getDriverStorage(e.DOMAIN);case 2:r=t.sent,s=r?r.codeTestingCount:0,m.a.setDriverStorage(e.DOMAIN,{codeTestingCount:s+1,lastTestTimestamp:Date.now()});case 5:case"end":return t.stop()}},t)}))()}getPreTaxShippingTotal(){return this._getUpdatedCart().then(e=>this._parseTotal(e))}_manageCode(e){const t={credentials:"include",headers:{"x-requested-with":"XMLHttpRequest"}};return o.a.delay(1e3).then(()=>i.request.get(`${this.BASE_URL}/${e}&_=${Date.now()}`,t).then(e=>e.text()))}_getUpdatedCart(){return fetch(window.location.href,{method:"GET",credentials:"include",headers:{"upgrade-insecure-requests":1}}).then(e=>e.text())}_parseTotal(e){return e?parseFloat(e.match(this.TOTAL_REG)[1]):p(f(this.TOTAL_SELECTOR))}},maxCoupons:5,isSinglePageApp:!0};r(44);const v=["https://cart.gamiss.com/m-flow-a-cart.htm","https://login.gamiss.com/m-flow-a-cart.htm"];var E={name:"Gamiss",domain:"gamiss.com",Driver:class extends l{constructor(){super();const e=window.location.host.split(".")[0];this.BASE_URL=`https://${e}.gamiss.com`}},isOnCartUrl:e=>v.some(t=>e.startsWith(t)),isCartEmpty:()=>Boolean(document.querySelector("#cartWrap .empty"))};var _={name:"RoseWholesale",domain:"rosewholesale.com",Driver:class extends l{constructor(){super(),this.BASE_URL="https://cart.rosewholesale.com",this.TOTAL_SELECTOR="#price_total"}},isOnCartUrl:e=>e.startsWith("https://cart.rosewholesale.com/shopping-cart")||e.startsWith("https://cart.rosewholesale.com/m-flow-a-cart.htm"),isCartEmpty:()=>Boolean(document.querySelector(".noGoods"))};const T=i.browserUtils.getCookie;var y={name:"SammyDress",domain:"sammydress.com",Driver:class extends l{constructor(){super(),this.BASE_URL="https://cart.sammydress.com"}},isOnCartUrl:e=>T("WEBF-user_id")&&(e.startsWith("https://cart.sammydress.com/shopping-cart")||e.startsWith("https://cart.sammydress.com/m-flow-a-cart.htm")),isCartEmpty:()=>Boolean(document.querySelector("#cartWrap .empty"))};t.default=[g,E,_,y]},677:function(e,t,r){"use strict";r.d(t,"a",function(){return u});r(12),r(112),r(10),r(20);var s=r(111),o=r(0),a=r(5);function n(e,t,r,s,o,a,n){try{var i=e[a](n),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(s,o)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(s,o){var a=e.apply(t,r);function i(e){n(a,s,o,i,c,"next",e)}function c(e){n(a,s,o,i,c,"throw",e)}i(void 0)})}}const c=o.format.toFloat;class u{watchForRestoreUserData(e=500){var t=this;let r=!1;const o=setInterval(i(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=14;break}return e.prev=1,r=!0,e.next=5,t.checkRestoreDataCondition();case 5:n=e.sent,r=!1,n&&(clearInterval(o),s.a.$emit("restore-user-data")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),Object(a.b)(e.t0,{source:"checkRestoreDataCondition"}),clearInterval(o);case 14:case"end":return e.stop()}},e,null,[[1,10]])})),e);return o}checkRestoreDataCondition(){return!1}storeUserData(e){var t=this;return i(regeneratorRuntime.mark(function r(){var s,n,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getUserData();case 2:if(null!==(s=r.sent)){r.next=5;break}return r.abrupt("return",Promise.resolve());case 5:return n=t.getUserDataStorageKey(e),i={userData:s,storedTime:Date.now()},a.a.setDriverStorage(n,i),Object(o.log)("Stored user data: %O",i),r.abrupt("return",Promise.resolve());case 10:case"end":return r.stop()}},r)}))()}restoreUserData(e,t=6e5){var r=this;return i(regeneratorRuntime.mark(function s(){var n,i,c,u;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=r.getUserDataStorageKey(e),s.next=3,a.a.getDriverStorage(n);case 3:if(!(i=s.sent)){s.next=11;break}if(c=i.storedTime,u=i.userData,a.a.deleteDriverStorage(n),!(Date.now()-c<=t)){s.next=10;break}return Object(o.log)("Restore user data: %O",u),s.abrupt("return",r.setUserData(u));case 10:Object(o.log)("User data is outdated, skip restoring");case 11:return s.abrupt("return",Promise.resolve());case 12:case"end":return s.stop()}},s)}))()}getUserData(){return null}setUserData(){return Promise.resolve()}getUserDataStorageKey(e){return`${e}_userData`}getStartPrice(){let e=Number.MAX_SAFE_INTEGER;const t=this.TOTAL_ELEMENT_CONFIG;if(t){const r=t.selector,s=t.attribute,o=t.regex;let n;if(Array.isArray(r)?r.forEach(e=>{n||(n=document.querySelector(e))}):"string"==typeof r?n=document.querySelector(r):Object(a.b)(new Error(`Total selector type mismatch. Expected string | array, got ${typeof r}`)),n){let t=s?n.getAttribute(s):n.textContent;if(t&&o){const e=o.pattern,r=void 0===e?null:e,s=o.group,a=void 0===s?0:s;t=t.match(r)[a]}e=c(t)}}return e}beforeTestCodes(){return Promise.resolve()}beforeCheckCodes(){return Promise.resolve()}beforeApplyCodes(){return Promise.resolve()}checkCodes(){return Promise.resolve()}applyCodes(){return Promise.resolve()}stackCodes(){return Promise.resolve()}removeCodes(){return Promise.resolve()}getMerchantCodes(){return[]}getExistingCodes(){return{codes:[],codeCount:0}}getPreTaxShippingTotal(){return null}watchForCartUrl(e=500){var t=this;let r=null,o=!1;const n=setInterval(i(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=16;break}return i=null,e.prev=2,o=!0,e.next=6,t.checkCondition();case 6:i=e.sent,o=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),Object(a.b)(e.t0,{source:"checkCondition"}),clearInterval(n);case 14:i!==r&&s.a.$emit(i?"cart-active":"cart-inactive"),r=i;case 16:case"end":return e.stop()}},e,null,[[2,10]])})),e);return n}checkCondition(){return!1}completeExperience(){return Promise.resolve()}completeExperiencePromisified(...e){return this._promisify(this.completeExperience,e)}beforeTestCodesPromisified(...e){return this._promisify(this.beforeTestCodes,e)}getStartPricePromisified(){return this._promisify(this.getStartPrice)}getMerchantCodesPromisified(...e){return this._promisify(this.getMerchantCodes,e)}getExistingCodesPromisified(...e){return this._promisify(this.getExistingCodes,e)}removeCodesPromisified(...e){return this._promisify(this.removeCodes,e)}beforeApplyCodesPromisified(...e){return this._promisify(this.beforeApplyCodes,e)}applyCodesPromisified(...e){return this._promisify(this.applyCodes,e)}beforeCheckCodesPromisified(...e){return this._promisify(this.beforeCheckCodes,e)}checkCodesPromisified(...e){return this._promisify(this.checkCodes,e)}stackCodesPromisified(...e){return this._promisify(this.stackCodes,e)}_promisify(e,t){return Promise.resolve().then(()=>e.apply(this,t))}}}}]);